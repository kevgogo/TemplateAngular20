echo "ðŸ” Husky: Validando mensaje de commit..." >&2

# ValidaciÃ³n bÃ¡sica sin dependencias externas
MSG_FILE="$1"
MSG_CONTENT="$(cat "$MSG_FILE")"

# ValidaciÃ³n simple si commitlint no estÃ¡ disponible
if ! command -v npx >/dev/null 2>&1; then
  echo "âš ï¸  Node.js no disponible, usando validaciÃ³n bÃ¡sica..." >&2
  
  # ValidaciÃ³n bÃ¡sica de longitud
  MSG_LENGTH=$(echo "$MSG_CONTENT" | head -n1 | wc -c)
  if [ "$MSG_LENGTH" -lt 10 ]; then
    echo "âŒ El mensaje de commit es demasiado corto (mÃ­n. 10 caracteres)" >&2
    exit 1
  fi
  
  if [ "$MSG_LENGTH" -gt 100 ]; then
    echo "âŒ El encabezado es demasiado largo (mÃ¡x. 100 caracteres)" >&2
    exit 1
  fi
  
  echo "âœ… ValidaciÃ³n bÃ¡sica pasada" >&2
  exit 0
fi

# Usar commitlint con formateador
if npx commitlint --edit "$1" --format ./commitlint.formatter.cjs; then
  echo "âœ… Mensaje de commit vÃ¡lido" >&2
else
  echo "âŒ Mensaje de commit invÃ¡lido - revisa el formato" >&2
  exit 1
fi