<div class="container py-3">
  <h2>Demo GraphQL</h2>

  <form class="mb-3" (ngSubmit)="consultar()">
    <div class="form-check mb-2">
      <input
        id="onlyCo"
        class="form-check-input"
        type="checkbox"
        [(ngModel)]="onlyCO"
        name="onlyCO"
      />
      <label class="form-check-label" for="onlyCo">
        Solo Colombia (co = true)
      </label>
    </div>

    <button class="btn btn-primary" type="submit" [disabled]="loading()">
      {{ loading() ? "Consultando…" : "Consultar" }}
    </button>
  </form>

  @if(errorMsg()){
  <div class="alert alert-danger">
    {{ errorMsg() }}
  </div>
  }

  <div *ngIf="data() as d">
    <h5 class="mt-3">Resultado</h5>
    <pre class="bg-light p-2 rounded">{{ d | json }}</pre>

    <h5 class="mt-3">Farms</h5>
    <div class="table-responsive">
      <table class="table table-sm table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>ID Colibrí</th>
            <th>Nombre</th>
            <th>Corto</th>
          </tr>
        </thead>
        <tbody>
          @for (f of d.farms; track $index) {
          <tr>
            <td>{{ f.farm_id }}</td>
            <td>{{ f.farm_id_colibri ?? "-" }}</td>
            <td>{{ f.farm_name }}</td>
            <td>{{ f.farm_short_name ?? "-" }}</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
